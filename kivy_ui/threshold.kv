#:kivy 2.3.0
#:include ../light_detection/widgets/slider_manager.kv

<ThresholdRoot>: # N.B: RelativeLayout (from Screen) does different styling
    file_selector: file_select
    dropdown_row: dropdown_row
    channel_dropdown: channel_dropdown
    algorithm_dropdown: algorithm_dropdown
    slider_manager: slider_manager
    selected_channel: channel_dropdown.text
    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height
        BoxLayout:
            id: dropdown_row
            # Use Spinners over dropdowns here as Dropdowns relative layout combined with Screens
            # FloatLayout causes display issues.
            size_hint: 1, 0.08
            DropdownSpinner:
                size_hint: 1, 1
                id: channel_dropdown
                text: "grayscale_image"
                values: ["grayscale_image", "red_channel", "green_channel", "blue_channel", "hue_channel", "saturation_channel", "brightness_channel"]
                on_text: root.update_channel(self.text)
            DropdownSpinner:
                size_hint: 1, 1
                id: algorithm_dropdown
                text: "GLOBAL_THRESH"
                values: ["GLOBAL_THRESH", "ADAPTIVE_THRESH_MEAN_C", "ADAPTIVE_THRESH_GAUSSIAN_C", "OTSU_THRESH"]
                on_text: root.update_algorithm(self.text)
        GridLayout:
            cols: 2
            size_hint: 1, 0.64
            Image:
                source: root.selected_image_path
        SliderManager:
            id: slider_manager
            size_hint: 1, 0.2
        FileSelectButton:
            size_hint: 1, 0.08
            id: file_select
            path_selected_callback: root.update_root_data
            on_press: self.open_file_select(self)
            text: 'Select Image'

<EntryScreen>:
    FileSelectButton:
        id: file_select
        path_selected_callback: root.swap_screen
        on_press: self.open_file_select(self)
        text: 'Select Image'
